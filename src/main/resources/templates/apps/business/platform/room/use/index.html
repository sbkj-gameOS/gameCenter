<div class="layui-layout layui-layout-content">
    <div class="layui-side layui-beimi-left">
        <div class="layui-side-scroll">
            <#include "/apps/business/platform/include/left.html"/></div>
    </div>
    <div class="layui-body">
        <div class="layui-side-scroll">
            <div class="row">
                <h1 class="site-h1" style="background-color:#FFFFFF;">
                    房卡使用后台管理界面
                </h1>
                <div class="col-lg-12">
                    <div class="user_online" style="height:60px;">
                        <form class="layui-form" action="">
                            <div class="layui-form-item" style="position: relative">
                                <label class="layui-form-label " style="display: block;margin-top:10px; text-align: center;width:50px">
                                    用户名:
                                </label>
                                <div class="layui-input-block col-lg-2 col-md-2 col-sm-2 col-xs-1" style="width:200px; display: block;float:left;">
                                    <input type="texts" id="txtNames" name="title" required  lay-verify="required" placeholder="" autocomplete="off" class="layui-input" style="margin-left: 20px;">
                                </div>
                                <label class="layui-form-label" style="display: block;margin-top:10px; text-align: center;width:80px">
                                    邀请码:
                                </label>
                                <div class="layui-input-block col-lg-2 col-md-2 col-sm-2 col-xs-1" style="width:200px; display: block;float:left;">
                                    <input type="search" id="search" name="title" required  lay-verify="required" placeholder="" autocomplete="off" class="layui-input" style="margin-left: 20px;">
                                </div>
                                <div class="boxs col-lg-2 col-md-2 col-sm-2 col-xs-1" style="width: 100px;height:40px;float:right;">
                                    <button type="button" class="layui-btn layui-btn-radius layui-btn-normal" style="display: block; float:left; width:100px; height:40px;position: absolute;top: 10px;left:700px;border-radius: 3px">
                                        查询
                                    </button>
                                </div>
                            </div>
                        </form>
                    </div>
                    <div class="row" style="padding:5px;">
                        <div class="col-lg-12">
                            <table class="layui-table" lay-data="{height:640,url:'/roomCard/getToUseJson', page:true, id:'test'}" lay-filter="test" id="box">
                                <thead>
                                <tr>
                                    <th lay-data="{field:'id', width:260}">序号</th>
                                    <th lay-data="{field:'userName',width:260}">用户名</th>
                                    <th lay-data="{field:'invitationCode',width:260}">邀请码</th>
                                    <th lay-data="{field:'useTime',width:260}">使用时间</th>
                                    <th lay-data="{field:'useRoomCount',width:260}">使用房卡数量</th>
                                    <th lay-data="{field:'surplusRoomCount',width:262}">剩余房卡数量</th>
                                </tr>
                                </thead>
                                <tbody>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="" charset="utf-8"></script>
<script>

    var userName = sessionStorage.getItem("toUseName");
    var invitationCode = sessionStorage.getItem("invitationCode");
    if(userName !="" && invitationCode !=""){
        document.getElementById("txtNames").value = userName;
        document.getElementById("search").value = invitationCode;
        var tablebox =document.getElementById("box").getAttribute("lay-data");
        var tableboxUrl = "/roomCard/getToUseJson?userName="+userName+"&invitationCode="+invitationCode;
        document.getElementById("box").setAttribute("lay-data","{height:640,url:'"+tableboxUrl+"', page:true, id:'test'}");
    }

    layui.use('element', function() {
        var element = layui.element;
    });

//后台数据
    layui.use('table', function(){
        var table = layui.table;
    });

    //搜索框代码
    $(function(){
        $("button[type=button]").click(function(){
            var txt=$("#txtNames").val();
            var txtserach=$("#search").val();
            var userName = sessionStorage.setItem("toUseName",txt);
            var invitationCode=sessionStorage.setItem("invitationCode",txtserach);
            location.reload();
        });
    })
</script>


